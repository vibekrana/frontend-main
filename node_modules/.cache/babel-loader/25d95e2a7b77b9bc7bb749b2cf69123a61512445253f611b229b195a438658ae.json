{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route,Routes,Navigate}from\"react-router-dom\";import Login from\"./components/Login\";import ContentCreation from\"./components/ContentCreation\";import Register from\"./components/Register\";import Survey from\"./components/Survey\";import Connect from\"./Connect\";// Import the Connect component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[user,setUser]=useState(null);// Check if the user is already logged in (e.g., token exists in localStorage)\nuseEffect(()=>{const token=localStorage.getItem(\"token\");if(token){// You could verify the token with the backend here, but for now, assume it's valid\nsetUser({username:localStorage.getItem(\"username\")||\"admin\"});// Use stored username or default\n}},[]);const handleLogin=userData=>{setUser(userData);};const handleLogout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");localStorage.removeItem(\"appUser\");setUser(null);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/connect\"}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/connect\"}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/survey\",element:/*#__PURE__*/_jsx(Survey,{})}),/*#__PURE__*/_jsx(Route,{path:\"/connect\",element:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:10,right:10},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:\"0.5rem 1rem\",backgroundColor:\"#facc15\",color:\"#1f2937\",border:\"none\",borderRadius:\"0.5rem\",cursor:\"pointer\",fontWeight:\"600\"},children:\"Logout\"})}),/*#__PURE__*/_jsx(Connect,{})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/content\",element:user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:10,right:10},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:\"0.5rem 1rem\",backgroundColor:\"#facc15\",color:\"#1f2937\",border:\"none\",borderRadius:\"0.5rem\",cursor:\"pointer\",fontWeight:\"600\"},children:\"Logout\"})}),/*#__PURE__*/_jsx(ContentCreation,{user:user})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","Login","ContentCreation","Register","Survey","Connect","jsx","_jsx","jsxs","_jsxs","App","user","setUser","token","localStorage","getItem","username","handleLogin","userData","handleLogout","removeItem","children","path","element","to","onLogin","style","position","top","right","onClick","padding","backgroundColor","color","border","borderRadius","cursor","fontWeight"],"sources":["C:/Users/Vibek Rana/Pictures/frontend-main/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from \"react-router-dom\";\r\nimport Login from \"./components/Login\";\r\nimport ContentCreation from \"./components/ContentCreation\";\r\nimport Register from \"./components/Register\";\r\nimport Survey from \"./components/Survey\";\r\nimport Connect from \"./Connect\"; // Import the Connect component\r\n\r\nconst App = () => {\r\n  const [user, setUser] = useState(null);\r\n\r\n  // Check if the user is already logged in (e.g., token exists in localStorage)\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      // You could verify the token with the backend here, but for now, assume it's valid\r\n      setUser({ username: localStorage.getItem(\"username\") || \"admin\" }); // Use stored username or default\r\n    }\r\n  }, []);\r\n\r\n  const handleLogin = (userData) => {\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"username\");\r\n    localStorage.removeItem(\"appUser\");\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route\r\n          path=\"/login\"\r\n          element={\r\n            user ? <Navigate to=\"/connect\" /> : <Login onLogin={handleLogin} />\r\n          }\r\n        />\r\n        <Route\r\n          path=\"/register\"\r\n          element={user ? <Navigate to=\"/connect\" /> : <Register />}\r\n        />\r\n\r\n        {/* Add Survey Route */}\r\n        <Route path=\"/survey\" element={<Survey />} />\r\n\r\n        <Route\r\n          path=\"/connect\"\r\n          element={\r\n            user ? (\r\n              <div>\r\n                <div style={{ position: \"absolute\", top: 10, right: 10 }}>\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    style={{\r\n                      padding: \"0.5rem 1rem\",\r\n                      backgroundColor: \"#facc15\",\r\n                      color: \"#1f2937\",\r\n                      border: \"none\",\r\n                      borderRadius: \"0.5rem\",\r\n                      cursor: \"pointer\",\r\n                      fontWeight: \"600\",\r\n                    }}\r\n                  >\r\n                    Logout\r\n                  </button>\r\n                </div>\r\n                <Connect />\r\n              </div>\r\n            ) : (\r\n              <Navigate to=\"/login\" />\r\n            )\r\n          }\r\n        />\r\n\r\n        <Route\r\n          path=\"/content\"\r\n          element={\r\n            user ? (\r\n              <div>\r\n                <div style={{ position: \"absolute\", top: 10, right: 10 }}>\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    style={{\r\n                      padding: \"0.5rem 1rem\",\r\n                      backgroundColor: \"#facc15\",\r\n                      color: \"#1f2937\",\r\n                      border: \"none\",\r\n                      borderRadius: \"0.5rem\",\r\n                      cursor: \"pointer\",\r\n                      fontWeight: \"600\",\r\n                    }}\r\n                  >\r\n                    Logout\r\n                  </button>\r\n                </div>\r\n                <ContentCreation user={user} />\r\n              </div>\r\n            ) : (\r\n              <Navigate to=\"/login\" />\r\n            )\r\n          }\r\n        />\r\n        <Route path=\"*\" element={<Navigate to=\"/login\" />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}